<launch>

    <param name="/use_sim_time" type="bool" value="false"/>

    <arg name="imu_topic" default="/djiros/imu"/>
    <arg name="vins_topic" value="/vins_estimator/imu_propagate"/>

    <arg name="topic_mocap_uav" default="/mocap/uav"/>
    <arg name="topic_mocap_cone" default="/mocap/cone"/>
    <arg name="topic_odom_uav" default="/odom/uav"/>
    <arg name="topic_odom_cone" default="/odom/cone"/>
    <arg name="topic_cone_state" value="/rnw/cone_state"/>

<!--    <rosparam command="load" file="$(find rnw_ros)/config/rnw_config.yaml"/>-->

    <node pkg="mocap_optitrack" type="mocap_node" name="mocap_node" respawn="false" launch-prefix="" required="true" output="log">
        <rosparam file="$(find mocap_optitrack)/config/mocap.yaml" command="load" />
    </node>

    <node pkg="mocap2odom" type="mocap2odom" name="mocap2odom" output="screen" >
        <param name="publish_uav_odom" type="bool" value="true"/>
        <rosparam file="$(find mocap2odom)/config/calib.yaml" command="load" />
    </node>

    <node pkg="uart_odom" type="uart_odom" name="drone1_uwb_server" output="screen">
        <rosparam command="load" file="$(find uart_odom)/config/uart_odom_config.yaml" />
        <param name="serial_port" value="/dev/tty.uwb.master1"/>
        <remap from="~odom_in" to="/drone1/odom"/>
    </node>

    <node pkg="uart_odom" type="uart_odom" name="drone2_uwb_server" output="screen">
        <rosparam command="load" file="$(find uart_odom)/config/uart_odom_config.yaml" />
        <param name="serial_port" value="/dev/tty.uwb.master2"/>
        <remap from="~odom_in" to="/drone2/odom"/>
    </node>

    <node pkg="rnw_ros" type="odom2tf_node" name="drone1_tf" output="screen">
        <remap from="~odom" to="/drone1/odom"/>
        <param name="name" value="odom_drone1" />
    </node>

    <node pkg="rnw_ros" type="odom2tf_node" name="drone2_tf" output="screen">
        <remap from="~odom" to="/drone2/odom"/>
        <param name="name" value="odom_drone2" />
    </node>

    <node name="rviz_traj" pkg="rviz" type="rviz" output="log" args="-d $(find rnw_ros)/config/swarm.rviz" />

</launch>
